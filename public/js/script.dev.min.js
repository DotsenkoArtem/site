"use strict";function setPreloader(){preloader.style.transition="opacity ".concat(350,"ms"),preloader.classList.add("fade-out"),setTimeout(function(){preloader.remove()},350)}function modalsHandle(){var e=document.querySelectorAll(".js-modal-trigger");if(e)for(var s=function(){var o=e[t];o.addEventListener("click",function(){for(var e=o,s=document.getElementById(e.dataset.target),t=(s.classList.remove("closed"),s.classList.add("opened"),document.body.classList.add("scroll-hidden"),s.getElementsByClassName("js-modal-close")),n=0;n<t.length;n++)t[n].addEventListener("click",function(){var e;(e=s).classList.remove("opened"),e.classList.add("closed"),document.body.classList.remove("scroll-hidden")})})},t=0;t<e.length;t++)s()}window.addEventListener("load",function(){setPreloader(),modalsHandle()});var sounds={success:"audio/success.mp3",error:"audio/error-1.mp3"},soundSuccess=new Sound(sounds.success),soundError=new Sound(sounds.error),alertSound=soundSuccess;function Sound(e){var s=document.createElement("audio");s.src=e,this.play=function(){s.play()}}for(var forms=document.forms,_loop2=function(){var r=forms[i];r.addEventListener("submit",function(e){var s,a;e=e,s="php/mail.php",setupLoader(r),e.preventDefault?e.preventDefault():e.returnValue=!1,(a=new XMLHttpRequest).open("POST",s,!0),a.onload=function(){var e=document.createElement("div"),s=document.createElement("div"),t=document.createElement("div");e.className="thanks",s.className="thanks__content",t.className="thanks__close",e.append(s,t),wrapper.append(e),t.onclick=function(){o()},removeLoader(r),r.reset(),200<=a.status&&a.status<400?"success"==(t=JSON.parse(this.response)).result?(s.innerHTML="<h3><span>Спасибо</span>Мы перезвоним Вам в ближайшее время!</h3>",e.classList.remove("thanks_error"),e.classList.add("thanks_success"),alertSound=soundSuccess):("limitExceeded"==t.result?(s.innerHTML="<h3><span>Ошибка.</span>Превышен максимальный размер прикрепляемых файлов (10мб).</h3>",e.classList.remove("thanks_success"),e.classList.add("thanks_error"),alertSound=soundError):(s.innerHTML="<h3><span>Ошибка</span>Сообщение не отправлено</h3>",alertSound=soundError,e.classList.remove("thanks_success"),e.classList.add("thanks_error")),console.log(t.status)):alert("Ошибка сервера. Номер: "+a.status),e.classList.add("active"),alertSound.play();for(var n=0;n<r.elements.length;n++)r.elements[n].disabled=!1;function o(){e.classList.remove("active"),e.style.animation="slideOutRightBottom .5s ease forwards",setTimeout(function(){e.remove()},500)}setTimeout(function(){o()},5e3)},a.onerror=function(){alert("Ошибка отправки запроса")},a.send(new FormData(e.target))})},i=0;i<forms.length;i++)_loop2();function setupLoader(e){var s=document.createElement("div");s.className="submit-loader",e.querySelector(".loader-container ").appendChild(s)}function removeLoader(e){e.querySelector(".submit-loader").remove()}